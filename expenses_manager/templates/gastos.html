{% extends "base.html" %}

{% block custom_head %}
	{% include "datatables.html" %}
{% endblock %}

{% block content_title %}{{vivienda_usuario.vivienda}}{% endblock %}
{% block content %}

	<h3>Gastos</h3>
	<!-- Nav tabs -->
	<ul class="nav nav-tabs" role="tablist">
		<li role="presentation" class="active"><a href="#nuevo_gasto" aria-controls="nuevo_gasto" role="tab" data-toggle="tab">Nuevo Gasto</a></li>
		<li role="presentation"><a href="#pendientes" aria-controls="pendientes" role="tab" data-toggle="tab">Pendientes</a></li>
		<li role="presentation"><a href="#pagados" aria-controls="pagados" role="tab" data-toggle="tab">Pagados</a></li>
	</ul>
	<br>

	<!-- Tab panes -->
	<div class="tab-content">
		<!-- nuevo gasto -->
		<div role="tabpanel" class="tab-pane active" id="nuevo_gasto">
			<form action="/nuevo_gasto/" method="POST">
				{% csrf_token %}
				<table id="tabla_nuevo_gasto" class="table table-striped table-bordered" cellspacing="0" width="100%">
				    <thead>
				        <tr>
				        </tr>
				    </thead>
				    <tbody>
				    	{% for field in gasto_form %}
				    		<tr>
				    			<td><b>{{field.label}}</b></td>
				    			<td>{{field}}</td>
				    		</tr>
				    	{% endfor %}
						<tr>
							<td><b>Pagado:</b></td>
							<td><input type="checkbox" name="is_paid"></td>
						</tr>
				    </tbody>
				</table>
				<br>
				<button type="submit" class="btn btn-primary">Generar</input>
			</form>
		</div>

		<!-- pendientes -->
		<div role="tabpanel" class="tab-pane" id="pendientes">
			<table id="tabla_gastos_pendientes" class="table table-striped table-bordered" cellspacing="0" width="100%">
			    <thead>
			        <tr>
			            <th>Fecha</th>
			            <th>Categoría</th>
			            <th>Monto</th>
			        </tr>
			    </thead>
			    <tbody>
			        {% for gasto in gastos_pendientes_list %}
			        	<tr>
				            <td><a href="/detalle_gasto/{{gasto.id}}"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span></a> {{gasto.fecha_creacion}}</td>
				            <td>{{gasto.categoria}}</td>
				            <td>$ {{gasto.monto}}</td>
			        	</tr>
			        {% endfor %}
			    </tbody>
			</table>
		</div>

		<!-- pagados -->
		<div role="tabpanel" class="tab-pane" id="pagados">
			<div role="tabpanel" class="tab-pane" id="pendientes">
				<table id="tabla_gastos_pagados" class="table table-striped table-bordered" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th>Fecha</th>
							<th>Categoría</th>
							<th>Monto</th>
						</tr>
					</thead>
					<tbody>
						{% for gasto in gastos_pagados_list %}
						<tr>
							<td><a href="/detalle_gasto/{{gasto.id}}"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span></a> {{gasto.fecha_creacion}}</td>
							<td>{{gasto.categoria}}</td>
							<td>{{gasto.monto}}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>


	<script type="text/javascript">
		$(document).ready(function(){
			// TODO customize tables. Currently using the default argument-less dataTable
			$('#tabla_gastos_pendientes').DataTable();
			$('#tabla_gastos_pagados').DataTable();
		} );
	</script>
{% endblock %}