{% extends "base.html" %}
{% load bootstrap3 %}
{% load humanize %}

{% block custom_head %}
	{% include "general/datatables.html" %}
{% endblock %}

{% block content_title %}{{request.user.get_vivienda}}{% endblock %}
{% block content %}

	<h3>Gastos</h3>
	<hr>
	<!-- Nav tabs -->
	<ul class="nav nav-tabs" role="tablist">
		<li role="presentation" class="active"><a href="#nuevo_gasto" aria-controls="nuevo_gasto" role="tab" data-toggle="tab">Nuevo Gasto</a></li>
		<li role="presentation"><a href="#pendientes" aria-controls="pendientes" role="tab" data-toggle="tab">Pendientes</a></li>
		<li role="presentation"><a href="#pagados" aria-controls="pagados" role="tab" data-toggle="tab">Pagados</a></li>
	</ul>
	<br>

	<!-- Tab panes -->
	<div class="tab-content">
		<!-- nuevo gasto -->
		<div role="tabpanel" class="tab-pane active" id="nuevo_gasto">
			<form action="/nuevo_gasto/" method="POST">
				{% csrf_token %}
				{% bootstrap_form gasto_form %}
				<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
					<div class="btn-group" data-toggle="buttons">
						<label class="btn btn-success active">
							<input type="radio" name="is_not_paid" id="option2" autocomplete="off" checked>Pendiente
						</label>
						<label class="btn btn-success">
							<input type="radio" name="is_paid" id="option1" autocomplete="off">Pagado
						</label>
					</div>
					<div class="btn-group" role="group" aria-label="Third group">
						{% bootstrap_button "Generar" button_type="submit" button_class="btn-primary" %}
					</div>
				</div>
				<br><br>
			</form>
		</div>

		<!-- pendientes -->
		<div role="tabpanel" class="tab-pane" id="pendientes">
			<table id="tabla_gastos_pendientes" class="table table-striped table-bordered" cellspacing="0" width="100%">
			    <thead>
			        <tr>
			            <th>Fecha</th>
			            <th>Categoría</th>
			            <th>Monto</th>
			        </tr>
			    </thead>
			    <tbody>
			        {% for gasto in gastos_pendientes_list %}
			        	<tr>
				            <td><a href="/detalle_gasto/{{gasto.id}}"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span></a> {{gasto.fecha_creacion}}</td>
				            <td>{{gasto.categoria}}</td>
				            <td>$ {{gasto.monto|intcomma}}</td>
			        	</tr>
			        {% endfor %}
			    </tbody>
			</table>
		</div>

		<!-- pagados -->
		<div role="tabpanel" class="tab-pane" id="pagados">
			<div role="tabpanel" class="tab-pane" id="pendientes">
				<table id="tabla_gastos_pagados" class="table table-striped table-bordered" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th>Fecha</th>
							<th>Categoría</th>
							<th>Monto</th>
						</tr>
					</thead>
					<tbody>
						{% for gasto in gastos_pagados_list %}
						<tr>
							<td><a href="/detalle_gasto/{{gasto.id}}"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span></a> {{gasto.fecha_creacion}}</td>
							<td>{{gasto.categoria}}</td>
							<td>$ {{gasto.monto|intcomma}}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>


	<script type="text/javascript">
		$(document).ready(function(){
			// TODO customize tables. Currently using the default argument-less dataTable
			$('#tabla_gastos_pendientes, #tabla_gastos_pagados').each(function(){
				$(this).DataTable({
					paging: false
				});
			});
		} );
	</script>
{% endblock %}